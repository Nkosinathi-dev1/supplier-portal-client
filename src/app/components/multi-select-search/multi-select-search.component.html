<div class="bg-white p-4 rounded-lg shadow">
  <h3 class="text-lg font-semibold mb-4">Multi-Select Search</h3>

  <div class="flex items-center space-x-2 mb-4">
    <ng-select
      [items]="suppliers"
      bindLabel="companyName"
      bindValue="id"
      [(ngModel)]="selectedCompanyIds"
      [multiple]="true"
      [closeOnSelect]="false"
      placeholder="Select companies"
      class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:border-blue-400"
      (scrollToEnd)="onScrollToEnd()"
      [loading]="loadingSuppliers">

      <ng-template ng-option-tmp let-item="item">
        <div class="flex items-center px-3 py-2 w-full rounded border border-transparent"
             [ngClass]="{
               'bg-blue-600 text-white border-blue-700': selectedCompanyIds.includes(item.id),
               'hover:bg-blue-600 hover:text-white cursor-pointer': true,
               'mb-1': true
             }">
          {{ item.companyName }}
        </div>
      </ng-template>
    </ng-select>

    <button (click)="searchPhonesByIds()"
            class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 whitespace-nowrap">
      Search
    </button>
  </div>

  <p *ngIf="loading" class="text-gray-500">Loading...</p>

  <div *ngIf="results.length" class="space-y-2">
    <div *ngFor="let result of results" class="bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded">
      {{ result }}
    </div>
  </div>
</div>
